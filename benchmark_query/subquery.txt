SELECT distinct ?p
WHERE {
  ?s ?p ?o .
  ?o a <#{range}> .
  {
    SELECT distinct ?s
    WHERE {
      ?s a <#{domain}>.
    }
  }
}